## Mushroom：非关系型数据库
[English Version of README](./README.en.md)

### 蘑菇：基于 B<sup>link</sup>树索引的多线程非关系型数据库

#### 这是 [Up Database](http://www.github.com/UncP/Up_Database) 以及 [pear Database](http://www.github.com/UncP/pear) 的升级版本

#### 你可以在[这里](https://zhuanlan.zhihu.com/p/24800198)找到B link树的并发控制协议介绍

***

### B<sup>link</sup>树 Benchfuck
`关键值长度： 16 字节`  
`关键值数量： 1000 万组`  
`所在行有两组时间表示采用了不同的测试策略`
1. 单线程安排任务到循环队列，多线程执行
2. 多线程直接执行任务

|  版本号  |  线程数  |  排序时间（秒） |           改进             |
|--------|:-------:|:-----------:|:-----------------------------:|
| 0.1.0  |  单  |    16.00    ||
| 0.2.0  |  多  |    12.32    |         二阶段锁并发索引          |
| 0.2.1  |  多  |    11.28    |            锁管理器优化                      |
| 0.3.0  |  多  |    10.94    |  前缀压缩，B<sup>link</sup>树占用内存减少约 9.1 %             |
| 0.4.0  |  多  |    11.44    |  二次映射多线程工作队列，减小程序整体内存超过 50 % |
| 0.4.1  |  多  |    \   |  合并锁管理器与页面管理器，使每次操作减少1把锁 |
| 0.4.2  |  多  |    \   |  修改根节点分裂方式 |
| 0.4.3  |  多  |    \   |  增加测试策略，多线程不经过队列直接进行任务 |
| 0.4.4  |  多  |    \   |  重构锁管理器 |
| 0.5.0  |  多  |    11.70 / 9.00   |  修复从版本0.4.1到0.4.4一直存在的**bug** |


### TODO
- [x] B<sup>link</sup> 树索引管理器
- [x] 线程池
- [x] 多线程工作队列(有界，二次映射)
- [x] 锁管理器
- [x] 并发索引
- [x] 前缀压缩（懒惰）
- [ ] 数据管理器
